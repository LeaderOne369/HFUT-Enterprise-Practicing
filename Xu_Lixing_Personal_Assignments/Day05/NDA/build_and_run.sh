#!/bin/bash

# ç½‘ç»œè°ƒè¯•åŠ©æ‰‹ç¼–è¯‘å’Œè¿è¡Œè„šæœ¬

echo "ğŸ”¨ å¼€å§‹ç¼–è¯‘ç½‘ç»œè°ƒè¯•åŠ©æ‰‹..."

# åˆ›å»ºæ„å»ºç›®å½•
if [ ! -d "build" ]; then
    mkdir build
fi

cd build

# ä½¿ç”¨cmakeé…ç½®é¡¹ç›®
echo "ğŸ“‹ é…ç½®é¡¹ç›®..."
cmake ..

# ç¼–è¯‘é¡¹ç›®
echo "ğŸ—ï¸ ç¼–è¯‘é¡¹ç›®..."
make -j$(nproc)

# æ£€æŸ¥ç¼–è¯‘æ˜¯å¦æˆåŠŸ
if [ $? -eq 0 ]; then
    echo "âœ… ç¼–è¯‘æˆåŠŸï¼"
    echo "ğŸš€ å¯åŠ¨ç½‘ç»œè°ƒè¯•åŠ©æ‰‹..."
    ./NetworkDebuggingAssistant
else
    echo "âŒ ç¼–è¯‘å¤±è´¥ï¼è¯·æ£€æŸ¥é”™è¯¯ä¿¡æ¯ã€‚"
    exit 1
fi 